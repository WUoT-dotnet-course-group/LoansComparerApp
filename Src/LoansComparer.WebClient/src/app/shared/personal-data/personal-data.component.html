<div formGroupName="personalData">
  <div fxLayout="row" fxLayoutAlign="space-around center">
    <mat-form-field class="field" appearance="fill">
      <mat-label>First name</mat-label>
      <input matInput formControlName="firstName">
      <mat-error *ngIf="!personalDataForm.get('firstName')?.valid">
        <div *ngIf="personalDataForm.get('firstName')?.hasError('required'); else elseError">
          {{requiredFieldError}}
        </div>
        <ng-template #elseError>
          <div>
            {{invalidFirstNameError}}
          </div>
        </ng-template>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="field" appearance="fill">
      <mat-label>Last name</mat-label>
      <input matInput formControlName="lastName">
      <mat-error *ngIf="!personalDataForm.get('lastName')?.valid">
        <div *ngIf="personalDataForm.get('lastName')?.hasError('required'); else elseError">
          {{requiredFieldError}}
        </div>
        <ng-template #elseError>
          <div>
            {{invalidLastNameError}}
          </div>
        </ng-template>
      </mat-error>
    </mat-form-field>
  </div>

  <div fxLayout="row" fxLayoutAlign="space-around center">
    <mat-form-field class="field" appearance="fill">
      <mat-label>Birth date</mat-label>
      <input matInput formControlName="birthDate" [max]="dateEighteenYearsBefore" [matDatepicker]="birthPicker">
      <mat-datepicker-toggle matSuffix [for]="birthPicker"></mat-datepicker-toggle>
      <mat-datepicker #birthPicker></mat-datepicker>
      <mat-error *ngIf="!personalDataForm.get('birthDate')?.valid">
        <div *ngIf="personalDataForm.get('birthDate')?.hasError('required'); else elseError">
          {{requiredFieldError}}
        </div>
        <ng-template #elseError>
          <div>
            {{invalidBirthDateError}}
          </div>
        </ng-template>
      </mat-error>
    </mat-form-field>

    <mat-form-field [ngStyle]="{'visibility': 'hidden'}" class="field">
      <input matInput>
    </mat-form-field>
  </div>

  <div formGroupName="governmentDocument">
    <div fxLayout="row" fxLayoutAlign="space-around center">
      <mat-form-field class="field" appearance="fill">
        <mat-label>Government id number</mat-label>
        <input matInput formControlName="governmentId">
        <mat-error *ngIf="!personalDataForm.get('governmentDocument.governmentId')?.valid">{{requiredFieldError}}
        </mat-error>
      </mat-form-field>

      <mat-form-field class="field" appearance="fill">
        <mat-label>Government type</mat-label>
        <mat-select formControlName="governmentIdType" panelClass="select-panel">
          <mat-option *ngFor="let govType of governmentIdTypes" [value]="govType">
            {{govType.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="!personalDataForm.get('governmentDocument.governmentIdType')?.valid">{{requiredFieldError}}
        </mat-error>
      </mat-form-field>
    </div>
  </div>

  <div formGroupName="jobDetails">
    <div fxLayout="row" fxLayoutAlign="space-around center">
      <mat-form-field class="field" appearance="fill">
        <mat-label>Job type</mat-label>
        <mat-select formControlName="jobType" panelClass="select-panel">
          <mat-option *ngFor="let jobType of jobTypes" [value]="jobType">
            {{jobType.name}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="!personalDataForm.get('jobDetails.jobType')?.valid">{{requiredFieldError}}</mat-error>
      </mat-form-field>

      <mat-form-field [ngStyle]="{'visibility': 'hidden'}" class="field">
        <input matInput>
      </mat-form-field>
    </div>

    <div fxLayout="row" fxLayoutAlign="space-around center">
      <mat-form-field class="field" appearance="fill">
        <mat-label>Job start date</mat-label>
        <input matInput formControlName="jobStartDate"
          [max]="jobEndDate === null || dateNow < jobEndDate ? dateNow : jobEndDate" [matDatepicker]="jobStartPicker">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="jobStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #jobStartPicker></mat-datepicker>
        <mat-error *ngIf="!personalDataForm.get('jobDetails.jobStartDate')?.valid">
          <div *ngIf="personalDataForm.get('jobDetails.jobStartDate')?.hasError('required'); else elseError">
            {{requiredFieldError}}
          </div>
          <ng-template #elseError>
            <div>
              {{invalidJobStartError}}
            </div>
          </ng-template>
        </mat-error>
      </mat-form-field>

      <mat-form-field class="field" appearance="fill">
        <mat-label>Job end date</mat-label>
        <input matInput formControlName="jobEndDate" [min]="jobStartDate" [matDatepicker]="jobEndPicker">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="jobEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #jobEndPicker></mat-datepicker>
        <mat-error *ngIf="!personalDataForm.get('jobDetails.jobEndDate')?.valid">
          <div *ngIf="personalDataForm.get('jobDetails.jobEndDate')?.hasError('required'); else elseError">
            {{requiredFieldError}}
          </div>
          <ng-template #elseError>
            <div>
              {{invalidJobEndError}}
            </div>
          </ng-template>
        </mat-error>
      </mat-form-field>
    </div>
  </div>
</div>
